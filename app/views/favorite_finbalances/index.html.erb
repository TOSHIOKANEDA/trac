<% content_for :stylesheets do %>
  <%= stylesheet_link_tag "favorites/index", "data-turbo-track": "reload" %>
<% end %>
<% content_for :title, "お気に入り請求書一覧" %>

<div style="width:100%;">
  <%= render partial: "layouts/sidebar" %>
  
  <div class="main-content">
    <div class="container">
      <div class="header">
        <h1><i class="fas fa-list"></i>お気に入り請求書一覧</h1>
        <div class="header-actions">
          <%= link_to edit_favorite_path(@favorite), class: "btn btn-secondary" do %>
            <i class="fas fa-arrow-left"></i> お気に入り編集に戻る
          <% end %>
          <%= button_to new_favorite_favorite_finbalance_path(favorite_id: @favorite.id), method: :get, class: "btn btn-primary" do %>
            <i class="fas fa-plus"></i> 請求書追加
          <% end %>
        </div>
      </div>

      <div class="content-container">
        <!-- テーブルセクション -->
        <div class="table-section">
          <div class="table-header">
            <div class="table-title">
              <div class="section-icon"><i class="fas fa-table"></i></div>
              請求書リスト
            </div>
          </div>
          <div class="project-table-container">
            <table class="project-table">
              <thead>
                <tr>
                  <th>件名</th>
                  <th>小計</th>
                  <th>消費税</th>
                  <th>請求金額</th>
                  <th>Client名</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <% @favorite_finbalances.each do |fin| %>
                  <tr>
                    <td class="text-sm"><%= list_item_with_na(fin.subject) %></td>
                    <td class="text-sm"><%= number_with_delimiter(fin&.small_total) %></td>
                    <td class="text-sm"><%= number_with_delimiter(fin&.comumption_tax_total) %></td>
                    <td class="text-sm"><%= number_with_delimiter(fin&.total_amount) %></td>
                    <td class="text-sm"><div class="truncate-text" title="<%= list_item_with_na(fin&.client) %>"><%= list_item_with_na(fin&.client) %></div></td>
                    <td>
                      <%= link_to edit_favorite_favorite_finbalance_path(id: fin.favorite_finbalance_id, favorite_id: fin.id), class: "action-link" do %>
                        <i class="fas fa-edit"></i> 編集
                      <% end %>
                    </td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>